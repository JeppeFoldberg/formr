```{r eval=TRUE,echo=FALSE}
if (!exists("indent")) {
	indent = '###' # ugly hack so _regression_summary can be "spun" (variables included via `r ` have to be available)
}
if (exists("testing")) {
	scale = 1:10
}

scale_info = attributes(scale)
```

`r indent` `r scale_info$scale` {#`r scale_info$scale` .tabset}

`r indent`# Reliability {#`r attributes(scale)$scale`_reliability}
```{r}
scale_info$reliability
```

`r indent`# Likert plot {#`r attributes(scale)$scale`_likert}

```{r}
old_height = knitr::opts_chunk$get("fig.height")
knitr::opts_chunk$set(fig.height = ncol(attributes(scale)$likert_plot$items))
```
```{r}
graphics::plot(scale_info$likert_plot)
knitr::opts_chunk$set(fig.height = old_height)
```

`r indent`## Summary statistics {#`r item_name`_summary}
```{r}
pander::pander(skimr::skim_v(scale))
```

`r indent`# Items {#`r scale_info$scale`_items}

```{r results='asis'}
pander::pander(dplyr::bind_rows(
	lapply(scale_info$item, function(x) { 
		x$label_parsed = x$choices = x$choice_list = NULL
		as.data.frame(t(x)) })
))
```

